<template>
    <lightning-spinner if:true={showSpinner} alternative-text="Loading" size="medium"></lightning-spinner>
    <!-- Start Modal IMD-->
    <template if:true={isShowModal}>
        <section role="dialog" tabindex="-1" aria-modal="true" aria-label="Meaningful description of the modal content" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse">
                    <span class="slds-assistive-text">Cancel and close</span>
                </button>
                <div class="slds-modal__content slds-p-around_medium slds-modal__content_headless"  id="modal-content-id-1" style="align-self: center;width: 70%;">
                    <div class="slds-align_absolute-center">
                        <img style="max-height:40px" alt="QuestionMark" src={image}/>
                    </div>
                    <div class="slds-align_absolute-center" style="color:grey">                                              
                        Are you sure, You want to delete this document?
                    </div>
                    <div class="slds-modal__content slds-p-around_large" id="modal-content-id-3">
                        <lightning-messages></lightning-messages>
                            <div  class="slds-p-around_small btn-container slds-align_absolute-center">
                                <button class="slds-button slds-button_brand" style="background-color: rgb(161, 30, 30);" onclick={open_Modal}>Delete</button>  
                                <button class="slds-button slds-button_brand" onclick={closeModal}>Cancel</button>
                            </div>
                        </div>
                    </div>          
                </div>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>  
    </template>
    <!-- End Modal -->
    <lightning-layout multiple-rows="true">
        <template lwc:if={bounced_chartTable_visibility}>
            <lightning-layout-item size="12">
                <lightning-card title="Bounced/Cancelled IMD's">
                    <table
                        class="slds-table slds-table_bordered slds-table_fixed-layout slds-table_resizable-cols"
                        aria-label=""
                    >
                    <thead>
                    <tr class="slds-line-height_reset">
                        <th class="" scope="col">
                            <div class="slds-cell-wrap" title="Instrument Amount">
                                Instrument Amount 
                            </div>
                        </th> 
                        <th class="" scope="col">
                            <div class="slds-cell-wrap" title="Payment Mode">
                                Payment Mode
                            </div>
                        </th>
                        <th class="" scope="col">
                            <div class="slds-cell-wrap" title="Instrument Date">
                                Instrument Date
                            </div>
                        </th>  
                        <th class="" scope="col">
                            <div class="slds-cell-wrap" title="Instrument Handover Date">
                                Instrument Handover Date
                            </div>
                        </th>
                        <th class="" scope="col">
                            <div class="slds-cell-wrap" title="IMD Staus">
                                IMD Staus
                            </div>
                        </th> 
                        <th class="" scope="col">
                            <div class="slds-cell-wrap" title="Bounce Reason">
                                Bounce Reason
                            </div>
                        </th> 
                        <th class="" scope="col">
                            <div class="slds-cell-wrap" title="Account Number">
                                Account Number
                            </div>
                        </th>  
                        <th class="" scope="col">
                            <div class="slds-cell-wrap" title="MICR Code">
                                MICR Code
                            </div>
                        </th>  
                        <th class="" scope="col">
                            <div class="slds-cell-wrap" title="Preview">
                                Preview
                            </div>
                        </th>     
                    </tr>             
                </thead> 
                <tbody>
                <template for:each={bouncedIMDArr} for:item="record" for:index="index">
                <tr
                  key={record.Id}
                  aria-selected="false"
                  class="slds-hint-parent"
                >               
                    <td data-label="Instrument Amount">
                        <div class="slds-cell-wrap" title="Instrument Amount">
                            {record.InstrumentAmt__c}
                        </div>
                    </td>               
                    <td data-label="Payment Mode">
                        <div class="slds-cell-wrap" title="Payment Mode">
                            {record.PaymentMode__c}
                        </div>
                    </td>              
                    <td data-label="Instrument Date">
                        <div class="slds-cell-wrap" title="Instrument Date">
                            {record.InstrumentDt__c}
                        </div>
                    </td>                  
                    <td data-label="Instrument Handover Date">
                        <div class="slds-cell-wrap" title="Instrument Handover Date">
                            {record.InstrHandvrDateToOps__c}
                        </div>
                    </td>                    
                    <td data-label="IMD Staus">
                        <div
                        class="slds-cell-wrap"
                        title="IMD Status"
                        >
                        {record.IMDStatus__c}
                        </div>
                    </td> 
                    <td data-label="Bounce Reason">
                        <div
                        class="slds-cell-wrap"
                        title="Bounce Reason"
                        >
                        {record.CheqBounceReason__c}
                        </div>
                    </td>
                    <td data-label="Account Number">
                        <div
                        class="slds-cell-wrap"
                        title="Account Number"
                        >
                        {record.BankAccountNo__c}
                        </div>
                    </td>
                    <td data-label="MICR Code">
                        <div
                        class="slds-cell-wrap"
                        title="MICR Code"
                        >
                        {record.MICRCode__c}
                        </div>
                    </td>
                    <td data-label="Preview">
                        <div
                        class="slds-cell-wrap"
                        title="Preview"
                        >                                        
                            <lightning-icon onclick={handleDocumentViewBouncedIMD} data-index={index}  class="pointerClass"
                            icon-name='utility:preview' alternative-text='preview' variant='success' size='small'
                            title='preview'></lightning-icon>
                            
                        </div>
                    </td>
                </tr>
            </template>                           
            </tbody>
                    </table>
                </lightning-card>
            </lightning-layout-item>
        </template>
        <template lwc:if={success_FinnOneChequeId}>
            <div class="slds-align_absolute-center slds-text-heading_medium" style="height:5rem;color:#009EDB">IMD UPDATE SUCCESSFUL</div>               
        </template>
        <lightning-layout-item padding="around-small" size="12">
            <div>
                <strong> IMD Details</strong>
            </div>
        </lightning-layout-item>
    </lightning-layout>
    <lightning-layout multiple-rows="true">
        <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
            <div>
                <lightning-combobox 
                    label="Is it IMD Transfer Case ?" 
                    data-fieldname="IsIMDTransCase__c" 
                    value={imdWrapObj.IsIMDTransCase__c} 
                    onchange={inputChangeHandler}
                    options={choiceOptiopns} 
                    required={isIMDTransferVisible} disabled></lightning-combobox>
            </div>
        </lightning-layout-item>        
    </lightning-layout> 
    <lightning-layout multiple-rows="true">
        <template lwc:if={paymentModeVisible}>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="number" formatter="currency" step="0.01" value={imdWrapObj.IMDAmt__c} label="IMD Amount" onchange={inputChangeHandler}
                    required disabled data-fieldname="IMDAmt__c" ></lightning-input>
                </div>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-combobox 
                        label="Payment Mode" 
                        data-fieldname="PaymentMode__c"
                        value={imdWrapObj.PaymentMode__c}  
                        onchange={inputChangeHandler} 
                        options={paymentModeOptions} 
                        required={paymentModeVisible}
                        disabled={paymentOptionsDisable}>
                    </lightning-combobox>
                </div>
            </lightning-layout-item> 
        </template>
        <template lwc:if={paymentGatewayVisible}>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-combobox 
                        label="Payment Gateway" 
                        data-fieldname="PaymentGateway__c"
                        value={imdWrapObj.PaymentGateway__c} 
                        onchange={inputChangeHandler}  
                        options={paymentGateWayOptions} 
                        required={paymentGatewayVisible}
                        disabled={paymentOptionsDisable}></lightning-combobox> 
                </div>
            </lightning-layout-item>
        </template>
        <template lwc:if={transactionDetails}>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="number" formatter="currency" step="0.01" value={transAmtValue} label="Transaction Amount" data-fieldname="TransAmt__c" 
                    disabled={transAmtField_disable} min=0></lightning-input>
                </div>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="text" value={imdWrapObj.TransStatus__c} label="Transaction Status" onchange={inputChangeHandler}
                    data-fieldname="TransStatus__c" disabled></lightning-input>
                </div>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <!-- onchange={inputChangeHandler} {imdWrapObj.PaytmErrMess__c} data-fieldname="PaytmErrMess__c"-->
                    <lightning-input type="text" value={errorMsg} label="Transaction Message" disabled></lightning-input>
                </div>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="text" value={imdWrapObj.PaymentRefNo__c} label="UTR No. / Payment reference no" onchange={inputChangeHandler}
                    data-fieldname="PaymentRefNo__c" disabled></lightning-input>
                </div>
            </lightning-layout-item>
        </template>
    </lightning-layout>
    <template lwc:if={checkOrDDSectionVisible}>
        <lightning-layout multiple-rows="true"> 
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <abbr title="required" class="slds-required">*</abbr>
                <label>Instrument Image</label>
                <c-upload-docs-reusable-component loan-app-id={loanAppId} applicant-id={applicantId}
                        doc-name={DocumentType} doc-type={DocumentType} disabled={disableFileUpload} doc-category="IMD Documents"
                        onrefreshdoctable={handleUploadDoc} onspinnerstatus={spinnerStatus} file-size-msz={fileSizeMsz} allowed-fil-format={allowedFilFormat}
                        convert-to-single-image=true document-detai-id={DocumentDetaiId} disable-mode={checkDDInst_enable}>
                    </c-upload-docs-reusable-component>
                <!-- <c-upload-docs-container allowed-fil-format={allowedFilFormat} doc-category="IMD Documents" doc-type={DocumentType} doc-name={DocumentType} applicant-id={applicantId} loan-app-id={loanAppId}
                onrefreshdoctable={handleUploadDoc} file-size-msz={fileSizeMsz} disable-mode={checkDDInst_enable}></c-upload-docs-container>  -->
            </lightning-layout-item>                      
        </lightning-layout>
    </template>
    <template lwc:if={docDet}> 
        <lightning-layout multiple-rows="true">          
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <!-- Uploaded File List -->
                <table aria-multiselectable="true" class="slds-table slds-table_fixed-layout slds-table_resizable-cols" role="grid"
                aria-label="Example advanced table of Opportunities in actionable mode">
                    <tbody>
                        <template for:each={_documentDetail} for:item="docDetail" for:index="index" if:true={docDetail.DocDetail__c}>
                            <tr key={docDetail.Id} aria-selected="false" class="slds-hint-parent">                       
                                <td class="slds-cell_action-mode" role="gridcell">                       
                                    <div class="slds-truncate" title={docDetail.DocDetail__r.DocSubTyp__c}>{docDetail.DocDetail__r.DocSubTyp__c}</div>
                                </td> 
                                <td>
                                    <div class="slds-text-align_center">                                          
                                        <lightning-icon onclick={handleDocumentView} data-index={index}  class="slds-p-right_medium pointerClass"
                                        icon-name='utility:preview' alternative-text='preview' variant='success' size='small'
                                        title='preview'></lightning-icon>
                                        
                                        <lightning-button-icon onclick={handleDocumentDelete} class="pointerClass custom-css"
                                            data-index={index}
                                            icon-name='utility:delete' alternative-text='delete' variant='error' size='small'
                                            title='delete' disabled={checkDDInst_enable}></lightning-button-icon>                               
                                    </div>
                                </td> 
                            </tr>
                        </template>    
                    </tbody>
                </table> 
                <!-- Uploaded File List -->
            </lightning-layout-item>
        </lightning-layout>
    </template>
    <template lwc:if={checkOrDDSectionVisible}>
        <lightning-layout multiple-rows="true">
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="number" formatter="currency" step="0.01" value={imdWrapObj.InstrumentAmt__c} label="Amount mentioned on instrument" onchange={inputChangeHandler} onblur={handleBlur}
                    required={checkOrDDSectionVisible} data-fieldname="InstrumentAmt__c" disabled={disableMode} min=0></lightning-input>
                </div>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="text" pattern="[0-9]{6}" message-when-pattern-mismatch="Please Enter Valid 6-digit Instrument No." value={imdWrapObj.InstrumentNo__c} label="Instrument No." onchange={inputChangeHandler}
                    required={checkOrDDSectionVisible} data-fieldname="InstrumentNo__c" disabled={disableMode}></lightning-input>
                </div>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="date" value={imdWrapObj.InstrumentDt__c} label="Instrument Date" onchange={inputChangeHandler}
                    required={checkOrDDSectionVisible} data-fieldname="InstrumentDt__c" disabled={disableMode}></lightning-input>
                </div>
            </lightning-layout-item>
            <template lwc:if={checkSectionVisible}>
                <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                    <div>
                        <lightning-input type="text" value={imdWrapObj.BankAccountNo__c} label="Bank Account No." onchange={inputChangeHandler}
                        required={checkSectionVisible} data-fieldname="BankAccountNo__c" pattern="[0-9]+" message-when-pattern-mismatch={messageMismatchError}  disabled={disableMode}></lightning-input>
                    </div>
                </lightning-layout-item>
            </template>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <c-custom-lookup               
                        required={checkOrDDSectionVisible}
                        label="Dealing Bank"
                        field-name='DealingBank__c'
                        object-api-name='MasterData__c'
                        field-api-name='Name' 
                        selected-record-name={imdWrapObj.DealingBank__c}
                        selected-record-id={imdWrapObj.DealingBank__c}
                        filter-condn={filterCondnDealingBank}
                        onselect={handleDealingBank}
                        disabled={disableMode}>
                    </c-custom-lookup>
                </div>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <c-custom-lookup               
                        required={checkOrDDSectionVisible}
                        label="MICR Code"
                        field-name='MICRCode__c'
                        object-api-name='MICRCodeMstr__c'
                        field-api-name='MICRCode__c' 
                        selected-record-name={imdWrapObj.MICRCode__c}
                        selected-record-id={imdWrapObj.MICRCode__c}
                        onselect={handleMICRSelect}
                        disabled={disableMode}>
                    </c-custom-lookup>
                </div>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="text" value={imdWrapObj.City__c} label="Bank City"
                    data-fieldname="City__c" required={checkOrDDSectionVisible} disabled>    
                    </lightning-input>
                </div>
            </lightning-layout-item> 
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="text" value={imdWrapObj.BankName__c} label="Bank Name"
                    data-fieldname="BankName__c" required={checkOrDDSectionVisible} disabled>    
                    </lightning-input>
                </div>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="text" value={imdWrapObj.BankBrch__c} label="Bank Branch"
                    data-fieldname="BankBrch__c" required={checkOrDDSectionVisible} disabled>    
                    </lightning-input>
                </div> 
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="date" value={imdWrapObj.InstrHandvrDateToOps__c} label="Instrument Handover Date To Ops" onchange={inputChangeHandler}
                    data-fieldname="InstrHandvrDateToOps__c" required={chartTable_visibility} disabled={handOverDate_enable}>    
                    </lightning-input>
                </div> 
            </lightning-layout-item>
        </lightning-layout> 
    </template>
    <template lwc:if={stageValidation}>
        <lightning-layout multiple-rows="true">
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="text" value={imdWrapObj.BRECheqClrStatus__c} label="Clearance Status"
                    data-fieldname="BRECheqClrStatus__c" disabled></lightning-input>
                </div>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="date" value={imdWrapObj.CheqClrDate__c} label="Clearance Date"
                    data-fieldname="CheqClrDate__c" disabled></lightning-input>
                </div>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="text" value={imdWrapObj.CheqBounceReason__c} label="Bounce Reason"
                    data-fieldname="CheqBounceReason__c" disabled></lightning-input>
                </div>
            </lightning-layout-item> 
        </lightning-layout>
    </template>
    <template lwc:if={errorMessageVisible}>
        <lightning-layout multiple-rows="true">
            <lightning-layout-item padding="around-small" size="12" small-device-size={layoutSize.small} medium-device-size={layoutSize.medium} large-device-size={layoutSize.large}>
                <div>
                    <lightning-input type="text" value={imdWrapObj.ErrorMessage__c} label="Error Message"
                    data-fieldname="ErrorMessage__c" disabled></lightning-input>
                </div>
            </lightning-layout-item>
        </lightning-layout>
    </template> 
    <lightning-layout multiple-rows="true">  
        <lightning-layout-item size="12">
            <div class="slds-m-top_small slds-m-bottom_medium slds-p-left_medium ">
                <div class="slds-clearfix"> 
                    <template lwc:if={desktopBoolean}>
                        <div class="slds-float_right">
                            <template lwc:if={refreshDisable}>
                            <lightning-icon variant="success" class="customButton slds-m-around_x-small"
                            icon-name="utility:refresh" alternative-text="refresh" size="small" title="refresh"
                            onclick={handleRefreshClick}></lightning-icon></template>
                            <template lwc:if={showLinkButton}> 
                                <lightning-button label="Send a Link to Customer" name="sendLinkToCust" title="Send a Link to Customer" onclick={handleCustomerLink} variant="brand" class="slds-m-around_x-small" 
                                disabled={disLink}></lightning-button>                       
                            </template>

                            
                            <template lwc:if={disFthTras}> 
                                <lightning-button label="Fetch Status" name="sendLinkToCust" title="Fetch Status" onclick={handleFetchStatus} variant="brand" class="slds-m-around_x-small" 
                                ></lightning-button>                       
                            </template>

                            <template lwc:if={reInitiateIMDButton}> 
                                <lightning-button label="Add IMD" name="reinitiateIMD" title="Add IMD" onclick={handleIMDReinitiate} variant="brand" class="slds-m-around_x-small" 
                                disabled={addImdDisable}></lightning-button>                       
                            </template>
                            <lightning-button label="LMS Update" name="lmsUpdate" title="LMS Update" onclick={handleLMSUpdate} variant="brand" class="slds-m-around_x-small" disabled={lmsUpdateEnable}>                               
                            </lightning-button>
                        </div>
                    </template> 
                    <template lwc:if={phoneBolean}>
                        <div class="slds-float_right">
                            <div class="slds-m-top_small inLineClass">
                                <template lwc:if={showLinkButton}> 
                                    <lightning-button label="Send a Link to Customer" name="sendLinkToCust" title="Send a Link to Customer" onclick={handleCustomerLink} variant="brand"
                                    disabled={disLink}></lightning-button>                       
                                </template>
                            </div>

                            <template lwc:if={disFthTras}> 
                                <lightning-button label="Fetch Status" name="sendLinkToCust" title="Fetch Status" onclick={handleFetchStatus} variant="brand" class="slds-m-around_x-small" 
                                ></lightning-button>                       
                            </template>
                            
                            <div class="slds-m-top_small inLineClass">
                                <lightning-button label="LMS Update" name="lmsUpdate" title="LMS Update" onclick={handleLMSUpdate} variant="brand" class="slds-p-left_small" disabled={lmsUpdateEnable}>                               
                                </lightning-button>
                            </div>
                        </div>
                    </template> 
                </div>  
            </div>
        </lightning-layout-item>
    </lightning-layout>
    <template if:true={showModalForFilePre}> 
        <c-multi-doc-previewer document-detail-id={imdWrapObj.DocDetail__c} onclosepreview={handleCloseModalEvent} has-document-id={hasDocumentId}> </c-multi-doc-previewer>
    </template>
    <template if:true={showModalForFilePreBouncedIMD}> 
        <c-multi-doc-previewer document-detail-id={docccId} onclosepreview={handleCloseModalEvent} has-document-id={hasDocumentId}> </c-multi-doc-previewer>
    </template>
 
      <!-- Template for Loan Application Charges -->  
      <template lwc:if={chartTable_visibility}>
          <lightning-accordion active-section-name={activeSection} class="accordion" allow-multiple-sections-open>
            <lightning-accordion-section name="A" label="Charges" class="applicantClass">
                <div class="slds-p-around_none slds-m-top_x-small slds-m-bottom_medium slds-m-horizontal_none modalBodyy">
                    <lightning-card>
                       <div class="slds-m-around_medium">
                           <table class="slds-table slds-table_cell-buffer slds-table_bordered" aria-labelledby="element-with-table-label other-element-with-table-label">
                               <thead>
                                   <tr class="slds-line-height_reset">
                                       <th class="" scope="col">
                                           <div class="slds-truncate" title="Charge Code ID">Charge Code ID</div>
                                       </th>
                                       <th class="" scope="col">
                                           <div class="slds-truncate" title="Charge Description">Charge Description</div>
                                       </th>
                                       <th class="" scope="col">
                                           <div class="slds-truncate" title="Remarks">Remarks</div>
                                       </th>
                                       <th class="" scope="col">
                                           <div class="slds-truncate" title="Amount">Amount</div>
                                       </th>
                                       <th class="" scope="col">
                                        <div class="slds-truncate" title=""></div>
                                    </th>
                                   </tr> 
                               </thead>
                               <tbody>
                                <template for:each={initialLoad_Arr} for:item="loadobj" for:index="index">
                                    <tr class="inputRows" key={loadobj.ChargeCodeDesID__c}>
                                        <td data-label="Charge Code ID" scope="row"> 
                                            <div class="slds-p-around_x-small">
                                                <lightning-input type="text" class="fields" variant="label-hidden" label="Charge Code ID" 
                                                data-name="ChargeCodeDesID__c" value={loadobj.ChargeCodeDesID__c} data-index={index} read-only>                                                        
                                                </lightning-input>                            
                                            </div>
                                        </td>
                                        <td data-label="Charge Description" scope="row">
                                            <div class="slds-p-around_x-small">
                                                <lightning-input type="text" class="fields" variant="label-hidden" 
                                                label="Charge Description" data-name="ChargeCodeDesc__c" value={loadobj.ChargeCodeDesc__c} data-index={index} read-only>                                                        
                                                </lightning-input>                            
                                            </div>
                                        </td>
                                        <td data-label="Remarks" scope="row">
                                            <div class="slds-p-around_x-small">
                                                <lightning-input type="text" class="fields" variant="label-hidden" label="Remarks" data-name="Remark__c" value={loadobj.Remark__c} data-index={index} read-only>                                                        
                                                </lightning-input>                            
                                            </div>
                                        </td>
                                        <td data-label="Amount" scope="row">
                                            <div class="slds-p-around_x-small">
                                                <lightning-input type="number" formatter="currency" step="0.01" class="fields" variant="label-hidden" label="Amount" data-name="Amount__c" value={loadobj.Amount__c} data-index={index} read-only>                                                        
                                                </lightning-input>                            
                                            </div>
                                        </td>
                                    </tr>
                                </template>
                                <template for:each={records} for:item="obj" for:index="index">
                                    <tr class="inputRows" key={obj.ChargeCodeDesID__c}>
                                        <th data-label="Charge Code ID" scope="row">
                                            <div class="slds-p-around_x-small">
                                                <lightning-input type="text" class="fields" variant="label-hidden" label="Charge Code ID" 
                                                data-name="ChargeCodeDesID__c" value={obj.ChargeCodeDesID__c} data-index={index} onchange={handleInputChange} read-only>                                                        
                                                </lightning-input>                            
                                            </div>
                                        </th>
                                        <td data-label="Charge Description">
                                            <div class="slds-m-bottom_medium">
                                                <c-custom-lookup
                                                    variant = "label-hidden"
                                                    field-name="ChargeCodeDesc__c"                                                           
                                                    object-api-name="MasterData__c"
                                                    field-api-name="Name"
                                                    selected-record-id={obj.ChargeCodeDesc__c}
                                                    selected-record-name={obj.ChargeCodeDesc__c}
                                                    onselect={handleValueSelect}
                                                    filter-condn={filterCondition}
                                                    index={index}
                                                    disabled={chargeDisAccess}
                                                    >
                                                </c-custom-lookup>
                                            </div>
                                        </td>
                                        <td data-label="Remarks">
                                                <div class="slds-p-around_x-small">
                                                    <lightning-input type="text" class="fields" variant="label-hidden" label="Remarks" data-name="Remark__c" value={obj.Remark__c} data-index={index} onchange={handleInputChange} onblur={handleBlur}>    
                                                        disabled={chargeDisAccess}                                                    
                                                    </lightning-input>                            
                                                </div>
                                        </td>
                                        <td data-label="Amount">
                                            <div class="slds-p-around_x-small">
                                                <lightning-input type="number" formatter="currency" step="0.01" class="fields" variant="label-hidden" label="Amount" data-name="Amount__c" value={obj.Amount__c} data-index={index} onchange={handleInputChange}>         
                                                    disabled={chargeDisAccess}                                              
                                                </lightning-input>                            
                                            </div>
                                        </td>
                                        <td>                                              
                                            <div class="slds-p-around_x-small">
                                                <lightning-button-icon
                                                    icon-name="action:delete"
                                                    alternative-text="Delete"
                                                    title="Delete"
                                                    data-index={index}
                                                    data-id={obj.Id}
                                                    onclick={handleDeleteAction}
                                                    disabled={chargeDisAccess}
                                                    >
                                                </lightning-button-icon>
                                            </div>                                                                                                                       
                                        </td>
                                    </tr>
                                </template>
                                <tr class="inputRows">
                                    <td></td> 
                                    <td></td>
                                    <th>  
                                        <b>Total Charges</b>                             
                                    </th>
                                    <td scope="row">
                                        <div class="slds-p-around_x-small">
                                            <lightning-input type="number" formatter="currency" step="0.01" class="fields" variant="label-hidden" value={totalAmt} read-only>                                                        
                                            </lightning-input>                            
                                        </div> 
                                    </td>
                                </tr>
                                <tr class="inputRows">
                                    <td></td>
                                    <td></td>
                                    <th>  
                                        <b>Total Dues </b>                             
                                    </th>
                                    <td scope="row"> 
                                        <div class="slds-p-around_x-small">
                                            <lightning-input type="number" formatter="currency" step="0.01" class="fields" variant="label-hidden" value={_totalAmt} read-only>                                                        
                                            </lightning-input>                            
                                        </div> 
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- <div slot="footer" class="slds-clearfix slds-float_right slds-p-around_x-small">
                            <lightning-button label="Add Charges" slot="actions" icon-name="utility:add" onclick={addRow}
                            disabled={chargeDisAccess}
                            ></lightning-button>
                        </div> -->
                   </lightning-card>
               </div>              
            </lightning-accordion-section>
        </lightning-accordion>
      </template>   
    <!-- Template for Loan Application Charges -->
    <!-- Start Modal Charges-->
    <template if:true={isShowChargeModal}>
        <section role="dialog" tabindex="-1" aria-modal="true" aria-label="Meaningful description of the modal content" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse">
                    <span class="slds-assistive-text">Cancel and close</span>
                </button>
                <div class="slds-modal__content slds-p-around_medium slds-modal__content_headless"  id="modal-content-id-11" style="align-self: center;width: 70%;">
                    <div class="slds-align_absolute-center">
                        <img style="max-height:40px" alt="QuestionMark" src={image}/>
                    </div>
                    <div class="slds-align_absolute-center" style="color:grey">                                              
                        Are you sure, You want to delete this charge?
                    </div>
                    <div class="slds-modal__content slds-p-around_large" id="modal-content-id-31">
                        <lightning-messages></lightning-messages>
                            <div  class="slds-p-around_small btn-container slds-align_absolute-center">
                                <button class="slds-button slds-button_brand" style="background-color: rgb(161, 30, 30);" onclick={delete_ChargeRecHandler}>Delete</button>  
                                <button class="slds-button slds-button_brand" onclick={closeChargeModal}>Cancel</button>
                            </div>
                        </div>
                    </div>          
                </div>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>  
    </template>
    <!-- End Modal -->
</template>