@isTest
private class HunterResponseProcsessorTest {
    
    @isTest
    public static void testProcess() {
        
        LoanAppl__c la = TestDataFactory.createLoanApplication(true);
        
        Applicant__c app = TestDataFactory.createSingleApplicant(true,la.id);
        
        IntgMsg__c intgMsg =new IntgMsg__c();
        intgMsg.Name='Hunter API';
        intgMsg.BU__c='HL / STL';
        intgMsg.Status__c='New';
        intgMsg.MStatus__c='Blank';
        intgMsg.RefObj__c='Applicant__c';
        intgMsg.RefId__c = app.Id;
        intgMsg.Resp__c='{"responseHeader":{"requestType":"HunterOnly","clientReferenceId":"Fedfina_LAN-0143","expRequestId":"RB000008117146","messageTime":"2023-12-13T11:10:18Z","overallResponse":{"decision":"NODECISION","decisionText":"No Decision","decisionReasons":["Error Or No Decision From FS"],"recommendedNextActions":[],"spareObjects":[]},"responseCode":"R0201","responseType":"INFO","responseMessage":"Workflow Complete.","tenantID":"IN24CEZZ"},"clientResponsePayload":{"orchestrationDecisions":[{"sequenceId":"1","decisionSource":"","decision":"","decisionReasons":[],"score":0,"decisionText":"","nextAction":"Continue","decisionTime":"2023-12-13T11:10:21Z"}],"decisionElements":[{"serviceName":"Hunter","normalizedScore":0,"score":280,"appReference":"Fedfina_LAN-0143","rules":[{"ruleId":"NH_INC_PAN_PER","ruleName":"NH_INC_PAN_PER","ruleScore":70,"ruleText":"NH_INC_PAN_PER"}],"warningsErrors":[{"responseType":"WARNING","responseCode":"102009","responseMessage":"Match schemes not used"}],"otherData":{"response":{"matchSummary":{"totalMatchScore":"280","rules":{"rule":[{"ruleID":"NH_INC_PAN_PER","score":70,"ruleCount":3,"isGlobal":1}],"totalRuleCount":4},"matchSchemes":{"scheme":[{"schemeID":1785,"score":70}],"schemeCount":2},"matches":1},"errorWarnings":{"errors":{"error":[],"errorCount":0},"warnings":{"warning":[{"number":"102009","message":"Match schemes not used","values":{"value":["317","318","1790","1792","1793","1794","1795"]}},{"number":"104001","message":"One or more versions of the requested submission do not have a score","values":{"value":[]}}],"warningCount":2}}}},"matches":[{"name":"1785","value":"70"}]}]},"originalRequestData":{"source":"WEB","contacts":[{"telephones":[{"type":"MOBILE","number":"9879879876","id":"618051717","areaCode":"US"}],"person":{"typeOfPerson":"CO_APPLICANT","personDetails":{"mothersFullName":"","fathersFullName":"","dateOfBirth":"2002-02-04"},"names":[{"type":"CURRENT","surName":"SILENT FUTURE MULTI TRADE PRIVATE LIMITED","middleNames":"","id":"933281776","firstName":"PRIVATE LIMITED COMPANY"}]},"organization":{},"incomes":[],"identityDocuments":[],"id":"A-000547","employmentHistory":[],"addresses":[]},{"telephones":[{"type":"MOBILE","number":"9148125609","id":"227004869","areaCode":"US"}],"person":{"typeOfPerson":"MAIN_APPLICANT","personDetails":{"mothersFullName":"","fathersFullName":"PRAKASH E T","dateOfBirth":"1993-12-15"},"names":[{"type":"CURRENT","surName":"NEWWW","middleNames":"","id":"908235502","firstName":"PARTNERSHIP"}]},"organization":{},"incomes":[],"identityDocuments":[{"id":"416929799","documentType":"PAN","documentNumber":"AAACJ9928K"}],"id":"A-001843","employmentHistory":[],"addresses":[]}],"application":{"productDetails":{"productType":"LOAN","productCode":"IND_LAP"},"originalRequestTime":"2023-12-13T11:10:18Z","applicants":[{"id":"349646843","contactId":"A-000547","applicantType":"CO_APPLICANT"},{"id":"407821613","contactId":"A-001843","applicantType":"MAIN_APPLICANT"}]}}}';
        intgMsg.Svc__c='Hunter API';
        intgMsg.Trigger_Platform_Event__c=true;
        insert intgMsg;
        
        IntgMsg__c intgMsg1 =new IntgMsg__c();
        intgMsg1.Name='Hunter API';
        intgMsg1.BU__c='HL / STL';
        intgMsg1.Status__c='New';
        intgMsg1.MStatus__c='Blank';
        intgMsg1.RefObj__c='Applicant__c';
        intgMsg1.RefId__c = app.Id;
        intgMsg1.Req__c='{"payload":{"source":"WEB","contacts":[{"telephones":[{"type":"MOBILE","number":"9241642458","id":"755483403","areaCode":"US"}],"person":{"typeOfPerson":"CO_APPLICANT","personDetails":{"mothersFullName":"safda","fathersFullName":"","dateOfBirth":"1977-09-02"},"names":[{"type":"CURRENT","surName":"hk","middleNames":"","id":"919658438","firstName":"HUF"}]},"organization":{},"incomes":[],"identityDocuments":[{"id":"100512874","documentType":"PAN","documentNumber":""}],"id":"A-000126","employmentHistory":[],"addresses":[{"street2":"NILAYAM","street":"H N 7-1-304/6/34 PADMALAYA","stateProvinceCode":"MAHARASHTRA","postal":"400072","locality":"","id":"791229201","countryCode":"IND","country":"","buildingName":"","addressType":null}]},{"telephones":[{"type":"MOBILE","number":"9879879876","id":"205776498","areaCode":"US"}],"person":{"typeOfPerson":"CO_APPLICANT","personDetails":{"mothersFullName":"","fathersFullName":"","dateOfBirth":"2002-02-04"},"names":[{"type":"CURRENT","surName":"SILENT FUTURE MULTI TRADE PRIVATE LIMITED","middleNames":"","id":"334097883","firstName":"PRIVATE LIMITED COMPANY"}]},"organization":{},"incomes":[],"identityDocuments":[],"id":"A-000547","employmentHistory":[],"addresses":[]},{"telephones":[{"type":"MOBILE","number":"","id":"285543695","areaCode":"US"}],"person":{"typeOfPerson":"CO_APPLICANT","personDetails":{"mothersFullName":"","fathersFullName":"","dateOfBirth":"1999-07-05"},"names":[{"type":"CURRENT","surName":null,"middleNames":"","id":"174720495","firstName":null}]},"organization":{},"incomes":[],"identityDocuments":[],"id":"A-000582","employmentHistory":[],"addresses":[]},{"telephones":[{"type":"MOBILE","number":"9067878765","id":"611820088","areaCode":"US"}],"person":{"typeOfPerson":"GUARANTOR","personDetails":{"mothersFullName":"","fathersFullName":"","dateOfBirth":""},"names":[{"type":"CURRENT","surName":"Kumar","middleNames":null,"id":"505524377","firstName":"Shekhar"}]},"organization":{},"incomes":[],"identityDocuments":[],"id":"A-000794","employmentHistory":[],"addresses":[]},{"telephones":[{"type":"MOBILE","number":"8745896541","id":"706006694","areaCode":"US"}],"person":{"typeOfPerson":"GUARANTOR","personDetails":{"mothersFullName":"","fathersFullName":"","dateOfBirth":""},"names":[{"type":"CURRENT","surName":"new","middleNames":null,"id":"832034157","firstName":"test"}]},"organization":{},"incomes":[],"identityDocuments":[{"id":"199618773","documentType":"AADHAAR","documentNumber":"XXXXXXXX5873"}],"id":"A-001278","employmentHistory":[],"addresses":[{"street2":"Earligere, Kallegowdana Palya Post","street":"","stateProvinceCode":"KARNATAKA","postal":"572201","locality":"","id":"882225565","countryCode":"IND","country":"India","buildingName":"","addressType":"PRIMARY"}]},{"telephones":[{"type":"MOBILE","number":"","id":"133730176","areaCode":"US"}],"person":{"typeOfPerson":"CO_APPLICANT","personDetails":{"mothersFullName":"","fathersFullName":"thimmappa","dateOfBirth":""},"names":[{"type":"CURRENT","surName":null,"middleNames":null,"id":"173911485","firstName":"kaishnareddi"}]},"organization":{},"incomes":[],"identityDocuments":[],"id":"A-001328","employmentHistory":[],"addresses":[]},{"telephones":[{"type":"MOBILE","number":"","id":"836320611","areaCode":"US"}],"person":{"typeOfPerson":"GUARANTOR","personDetails":{"mothersFullName":"","fathersFullName":"","dateOfBirth":""},"names":[{"type":"CURRENT","surName":"test","middleNames":"","id":"675393051","firstName":"PRIVATE LIMITED COMPANY"}]},"organization":{},"incomes":[],"identityDocuments":[],"id":"A-001565","employmentHistory":[],"addresses":[]},{"telephones":[{"type":"MOBILE","number":"9767817732","id":"514116594","areaCode":"US"}],"person":{"typeOfPerson":"CO_APPLICANT","personDetails":{"mothersFullName":"","fathersFullName":"","dateOfBirth":""},"names":[{"type":"CURRENT","surName":null,"middleNames":null,"id":"432478961","firstName":"VARSHA RAMESH PRADHAN"}]},"organization":{},"incomes":[],"identityDocuments":[],"id":"A-001755","employmentHistory":[],"addresses":[]},{"telephones":[{"type":"MOBILE","number":"9148125609","id":"815047104","areaCode":"US"}],"person":{"typeOfPerson":"MAIN_APPLICANT","personDetails":{"mothersFullName":"","fathersFullName":"PRAKASH E T","dateOfBirth":"1993-12-15"},"names":[{"type":"CURRENT","surName":"SHAW","middleNames":null,"id":"502236374","firstName":"LAV"}]},"organization":{},"incomes":[],"identityDocuments":[{"id":"782627567","documentType":"PAN","documentNumber":"EHEPS6295G"}],"id":"A-001843","employmentHistory":[],"addresses":[{"street2":"SHIVAJI NAGAR, WAKDEWADI","street":"SHIVAJI NAGAR, WAKDEWADI","stateProvinceCode":"MAHARASHTRA","postal":"411005","locality":"","id":"802120428","countryCode":"IND","country":"India","buildingName":"","addressType":"PRIMARY"}]},{"telephones":[{"type":"MOBILE","number":"","id":"975218063","areaCode":"US"}],"person":{"typeOfPerson":"CO_APPLICANT","personDetails":{"mothersFullName":"","fathersFullName":"PRAKASH E T","dateOfBirth":""},"names":[{"type":"CURRENT","surName":null,"middleNames":null,"id":"590086416","firstName":null}]},"organization":{},"incomes":[],"identityDocuments":[{"id":"248974516","documentType":"AADHAAR","documentNumber":"492515815873"}],"id":"A-002169","employmentHistory":[],"addresses":[]}],"application":{"productDetails":{"productType":"LOAN","productCode":"IND_LAP"},"originalRequestTime":"2023-12-07T07:19:08Z","applicants":[{"id":"976962676","contactId":"A-000126","applicantType":"CO_APPLICANT"},{"id":"390881833","contactId":"A-000547","applicantType":"CO_APPLICANT"},{"id":"993439652","contactId":"A-000582","applicantType":"CO_APPLICANT"},{"id":"034978937","contactId":"A-000794","applicantType":"GUARANTOR"},{"id":"431109752","contactId":"A-001278","applicantType":"GUARANTOR"},{"id":"061309439","contactId":"A-001328","applicantType":"CO_APPLICANT"},{"id":"006904991","contactId":"A-001565","applicantType":"GUARANTOR"},{"id":"814978242","contactId":"A-001755","applicantType":"CO_APPLICANT"},{"id":"954913670","contactId":"A-001843","applicantType":"MAIN_APPLICANT"},{"id":"573136057","contactId":"A-002169","applicantType":"CO_APPLICANT"}]}},"header":{"tenantId":"IN24CEZZ","requestType":"HunterOnly","options":{},"messageTime":"2023-12-07T07:19:08Z","expRequestId":"","clientReferenceId":"Fedfina_LAN_0143"}}';
        intgMsg1.Resp__c='{"responseHeader":{"requestType":"HunterOnly","clientReferenceId":"Fedfina_LAN-0143","expRequestId":"RB000008117146","messageTime":"2023-12-13T11:10:18Z","overallResponse":{"decision":"NODECISION","decisionText":"No Decision","decisionReasons":["Error Or No Decision From FS"],"recommendedNextActions":[],"spareObjects":[]},"responseCode":"R0201","responseType":"INFO","responseMessage":"Workflow Complete.","tenantID":"IN24CEZZ"},"clientResponsePayload":{"orchestrationDecisions":[{"sequenceId":"1","decisionSource":"","decision":"","decisionReasons":[],"score":0,"decisionText":"","nextAction":"Continue","decisionTime":"2023-12-13T11:10:21Z"}],"decisionElements":[{"serviceName":"Hunter","normalizedScore":0,"score":280,"appReference":"Fedfina_LAN-0143","rules":[{"ruleId":"NH_INC_PAN_PER","ruleName":"NH_INC_PAN_PER","ruleScore":70,"ruleText":"NH_INC_PAN_PER"}],"warningsErrors":[{"responseType":"ERROR","responseCode":"102009","responseMessage":"Match schemes not used"}],"otherData":{"response":{"matchSummary":{"totalMatchScore":"280","rules":{"rule":[{"ruleID":"NH_INC_PAN_PER","score":70,"ruleCount":3,"isGlobal":1}],"totalRuleCount":4},"matchSchemes":{"scheme":[{"schemeID":1785,"score":70}],"schemeCount":2},"matches":1},"errorWarnings":{"errors":{"error":[],"errorCount":0},"warnings":{"warning":[{"number":"102009","message":"Match schemes not used","values":{"value":["317","318","1790","1792","1793","1794","1795"]}},{"number":"104001","message":"One or more versions of the requested submission do not have a score","values":{"value":[]}}],"warningCount":2}}}},"matches":[{"name":"1785","value":"70"}]}]},"originalRequestData":{"source":"WEB","contacts":[{"telephones":[{"type":"MOBILE","number":"9879879876","id":"618051717","areaCode":"US"}],"person":{"typeOfPerson":"CO_APPLICANT","personDetails":{"mothersFullName":"","fathersFullName":"","dateOfBirth":"2002-02-04"},"names":[{"type":"CURRENT","surName":"SILENT FUTURE MULTI TRADE PRIVATE LIMITED","middleNames":"","id":"933281776","firstName":"PRIVATE LIMITED COMPANY"}]},"organization":{},"incomes":[],"identityDocuments":[],"id":"A-000547","employmentHistory":[],"addresses":[]},{"telephones":[{"type":"MOBILE","number":"9148125609","id":"227004869","areaCode":"US"}],"person":{"typeOfPerson":"MAIN_APPLICANT","personDetails":{"mothersFullName":"","fathersFullName":"PRAKASH E T","dateOfBirth":"1993-12-15"},"names":[{"type":"CURRENT","surName":"NEWWW","middleNames":"","id":"908235502","firstName":"PARTNERSHIP"}]},"organization":{},"incomes":[],"identityDocuments":[{"id":"416929799","documentType":"PAN","documentNumber":"AAACJ9928K"}],"id":"A-001843","employmentHistory":[],"addresses":[]}],"application":{"productDetails":{"productType":"LOAN","productCode":"IND_LAP"},"originalRequestTime":"2023-12-13T11:10:18Z","applicants":[{"id":"349646843","contactId":"A-000547","applicantType":"CO_APPLICANT"},{"id":"407821613","contactId":"A-001843","applicantType":"MAIN_APPLICANT"}]}}}';
        intgMsg1.Svc__c='Hunter API';
        intgMsg1.Trigger_Platform_Event__c=true;
        insert intgMsg1;
        
        List<IntgMsg__c> integrationMessages = new List<IntgMsg__c>{intgMsg};
        List<IntgMsg__c> integrationMessages1 = new List<IntgMsg__c>{intgMsg1};
        
        
        // Call the method
        Test.startTest();
        HunterResponseProcsessor.process(integrationMessages);
        HunterResponseProcsessor.process(integrationMessages1);
        Test.stopTest();
        
        
        
    }
    
    
}