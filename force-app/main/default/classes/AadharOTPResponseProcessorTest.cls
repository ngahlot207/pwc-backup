@isTest
public class AadharOTPResponseProcessorTest {
    @isTest
    static void testPositiveScenario() {
       LoanAppl__c La = TestDataFactory.createLoanApplication(true);
    	Applicant__c app = TestDataFactory.createSingleApplicant(true,La.id);
        
       ApplKyc__c kyc=new ApplKyc__c();
        kyc.Applicant__c=app.id;
        kyc.kycDoc__c='Aadhaar';
        kyc.DtOfBirth__c=Date.newInstance(1998, 8, 31);
        insert kyc;
        
        
       IntgMsg__c intgMsg = new IntgMsg__c();
        intgMsg.Name='CompositePaymentRequestGenerator';
        intgMsg.BU__c='HL / STL';
        intgMsg.Status__c='New';
        intgMsg.MStatus__c='Blank';
        intgMsg.RefObj__c='LoanAppl__c';
        intgMsg.RefId__c = la.Id;
        intgMsg.Resp__c = '{"status":"success","encrypted_response":"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"}';
        //intgMsg.Req__c = '{"Payload":{"payload":{"password":"","fileId":"4f3ee786b9611f28a8b055fff87f3f12485f818a"}},"Header":{"transactionID":"6YPT1706786719181","sha256Content":"1d26f8348133aa631031a4be69529bcbda50db4f7bdc738ca387a22ca47e3f4b","perfiosSignedHeaders":"host;x-perfios-content-sha256;x-perfios-date","perfioSignature":"7aedc08894f19adb8c6793b6be2905236fc227472ab7437006ad6c4536c0432b861b7bccd1f6fe44e4e8f70667b619281d5dc7841f5cc46b7f22c4071f124f5159ad476ca5ddbcf3faa75005c7f14e97c121d9085e28aa59809e4f410293a32574732b70da5a597a93601ae6100cf5e098e096c6444463318baf1f5b3b67abe3026b6ef4c90c9d4a3c803d6e235287b6a528ab77e0ab4b5cb0c3cc3c78bdd21cb1dc0e87b52464d2390252d969f4744f1b88c96bec0bdc298377477c183d037c63a235d21d23c3ee302eb26436924869a092c0e23ecd8e75c8ac84f742835acf6aff0cae5a6415d0279edf1988bfe02c456a02250b008bbace60bbc571db2ecd1fdfd38580b6ded53a15f8f0c9d96d59e47f777ce7eb5b3a30abdbead75795334325da26fe7d1aa419c690efed6362c15e43fa9973e6e31e20e9ac7a64833b05f1cb478fd6a0a9bcc1e7174798881cc99dfea5894116ff652264b3564531996ddce548cccdd1870908638c2558df7052fbacd63056e78a0842121052e03ebc0c715e5f6861dbcea78777374fb6d3ce29ca1de873dac37d94e279c71408289f9018fdaa4f7292421f7f69a9f41e3a627ed9da156b6f4b7a06f42b63f85cbe162aa67e099b6dd3014bb131e89eedf9e4dbacef72e80031b24942c4f9488f8cd26971416b455654877bb88b69fa0611e9570b56ce0cc1226630d3bcbcb721d8d9ab","perfiosAlgorithm":"PERFIOS1-RSA-SHA256","perfioRequestDate":"20240201T165523Z","fileId":null}}';
        intgMsg.Trigger_Platform_Event__c=true;
        insert intgMsg;
        Test.startTest();
      AadharOTPResponseProcessor.process(new List<IntgMsg__c>{ intgMsg });
        Test.stopTest();
    }

    @isTest
    static void testNegativeScenario() {
       LoanAppl__c La = TestDataFactory.createLoanApplication(true);
    	Applicant__c app = TestDataFactory.createSingleApplicant(true,La.id);
       IntgMsg__c intgMsg = new IntgMsg__c();
        intgMsg.Name='CompositePaymentRequestGenerator';
        intgMsg.BU__c='HL / STL';
        intgMsg.Status__c='New';
        intgMsg.MStatus__c='Blank';
        intgMsg.RefObj__c='LoanAppl__c';
        //intgMsg.ParentRefId__c = appbank.id;
        intgMsg.RefId__c = la.Id;
        intgMsg.Resp__c = '{"status":"error"}';
        //intgMsg.Req__c = '{"Payload":{"payload":{"password":"","fileId":"4f3ee786b9611f28a8b055fff87f3f12485f818a"}},"Header":{"transactionID":"6YPT1706786719181","sha256Content":"1d26f8348133aa631031a4be69529bcbda50db4f7bdc738ca387a22ca47e3f4b","perfiosSignedHeaders":"host;x-perfios-content-sha256;x-perfios-date","perfioSignature":"7aedc08894f19adb8c6793b6be2905236fc227472ab7437006ad6c4536c0432b861b7bccd1f6fe44e4e8f70667b619281d5dc7841f5cc46b7f22c4071f124f5159ad476ca5ddbcf3faa75005c7f14e97c121d9085e28aa59809e4f410293a32574732b70da5a597a93601ae6100cf5e098e096c6444463318baf1f5b3b67abe3026b6ef4c90c9d4a3c803d6e235287b6a528ab77e0ab4b5cb0c3cc3c78bdd21cb1dc0e87b52464d2390252d969f4744f1b88c96bec0bdc298377477c183d037c63a235d21d23c3ee302eb26436924869a092c0e23ecd8e75c8ac84f742835acf6aff0cae5a6415d0279edf1988bfe02c456a02250b008bbace60bbc571db2ecd1fdfd38580b6ded53a15f8f0c9d96d59e47f777ce7eb5b3a30abdbead75795334325da26fe7d1aa419c690efed6362c15e43fa9973e6e31e20e9ac7a64833b05f1cb478fd6a0a9bcc1e7174798881cc99dfea5894116ff652264b3564531996ddce548cccdd1870908638c2558df7052fbacd63056e78a0842121052e03ebc0c715e5f6861dbcea78777374fb6d3ce29ca1de873dac37d94e279c71408289f9018fdaa4f7292421f7f69a9f41e3a627ed9da156b6f4b7a06f42b63f85cbe162aa67e099b6dd3014bb131e89eedf9e4dbacef72e80031b24942c4f9488f8cd26971416b455654877bb88b69fa0611e9570b56ce0cc1226630d3bcbcb721d8d9ab","perfiosAlgorithm":"PERFIOS1-RSA-SHA256","perfioRequestDate":"20240201T165523Z","fileId":null}}';
        intgMsg.Trigger_Platform_Event__c=true;
        insert intgMsg;
        Test.startTest();
      AadharOTPResponseProcessor.process(new List<IntgMsg__c>{ intgMsg });
        Test.stopTest();
    }
}